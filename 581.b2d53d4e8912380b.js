"use strict";(self.webpackChunkamacom=self.webpackChunkamacom||[]).push([[581],{1581:(X,f,a)=>{a.r(f),a.d(f,{InstitucionesModule:()=>R});var p=a(6814),s=a(6223),u=a(1896),b=a(9182),I=a(2589),m=a(9347),t=a(5879);let T=(()=>{class e{constructor(i,n){this.dialogRef=i,this.data=n}onNoClick(){this.dialogRef.close()}confirmDelete(){}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(m.so),t.Y36(m.WI))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-delete",5,"i"]],decls:26,vars:4,consts:[[1,"clearfix"],[1,"font-weight-bold"]],template:function(n,o){1&n&&(t.TgZ(0,"div")(1,"ul",0)(2,"li")(3,"p")(4,"span",1)(5,"strong"),t._uU(6,"Nombre: "),t.qZA()(),t._uU(7),t.qZA()(),t.TgZ(8,"li")(9,"p")(10,"span",1)(11,"strong"),t._uU(12,"Tipo: "),t.qZA()(),t._uU(13),t.qZA()(),t.TgZ(14,"li")(15,"p")(16,"span",1)(17,"strong"),t._uU(18,"Descripci\xf3n: "),t.qZA()(),t._uU(19),t.qZA()(),t.TgZ(20,"li")(21,"p")(22,"span",1)(23,"strong"),t._uU(24,"Fecha: "),t.qZA()(),t._uU(25),t.qZA()()()()),2&n&&(t.xp6(7),t.Oqu(o.data.name),t.xp6(6),t.Oqu(o.data.institutionTypeId),t.xp6(6),t.Oqu(o.data.description),t.xp6(6),t.Oqu(o.data.createdAt))}})}return e})();var l=a(553),h=a(9862),A=a(2939),Z=a(5798),y=a(4524);const x=function(){return{type:"img",resource:"assets/images/alarma.png"}};let U=(()=>{class e extends I.n{constructor(i,n,o,r,v){super(),this.httpClient=i,this.dialog=n,this.snackBar=o,this.router=r,this.pasoParametrosService=v,this.title="INSTITUCIONES",this.subtitle="En esta pantalla podr\xe1s visualizar las instituciones existentes",this.config={title:"Lista de instituciones",keys:["id","name","description","institutionTypeName","updatedAt"],headerColumns:["No","Nombre","Descripci\xf3n","Tipo","\xfaltima actualizaci\xf3n"],urlData:l.N.apiUrl+"/institution/consulta",typeColumns:["uuid",null,null,null,"date"],pageable:!0,showFilter:!0},this.modalForm={edit:{urlView:"/admin/instituciones/instituciones/add-institucion",actionType:"edit"},create:{urlView:"/admin/instituciones/instituciones/add-institucion",actionType:"add"},delete:{modal:{title:"Eliminar institucion",component:T},actionType:"delete",urlEndpoint:"/alarmSign"},view:{modal:{title:"Ver signo de alarma",width:"400px",maxHeight:"500px"},actionType:"view",configView:[{label:"Nombre",key:"name"},{label:"Descripci\xf3n",key:"description"},{label:"Tipo",key:"institutionTypeName"},{label:"Fecha de creaci\xf3n",key:"createdAt",type:"date"},{label:"Fecha de actualizaci\xf3n",key:"updatedAt",type:"date"}]}}}addNew(){this.router.navigate(["/admin/instituciones/instituciones/add-institucion"])}search(i){this.pasoParametrosService.adicionarParametro("data",i),this.router.navigate(["/admin/instituciones/instituciones/search-institucion"])}editCall(i){this.pasoParametrosService.adicionarParametro("data",i),this.pasoParametrosService.adicionarParametro("modoEditar",!0),this.router.navigate(["/admin/instituciones/instituciones/add-institucion"])}deleteItem(i){let n;n="true"===localStorage.getItem("isRtl")?"rtl":"ltr",this.dialog.open(T,{data:i,direction:n})}loadData(){}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(h.eN),t.Y36(m.uw),t.Y36(A.ux),t.Y36(u.F0),t.Y36(Z.T))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-allinstituciones"]],features:[t.qOj],decls:1,vars:7,consts:[[3,"title","subtitle","showCreateButton","configTable","modalForm","dialogIcon"]],template:function(n,o){1&n&&t._UZ(0,"app-crud-container",0),2&n&&t.Q6J("title",o.title)("subtitle",o.subtitle)("showCreateButton",!0)("configTable",o.config)("modalForm",o.modalForm)("dialogIcon",t.DdM(6,x))},dependencies:[y._]})}return e})();var C=a(7398);let S=(()=>{class e{constructor(i){this.http=i}save(i){return this.http.post(l.N.apiUrl+"/institution/create",i)}update(i){return this.http.post(l.N.apiUrl+"/institution",i)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(h.eN))};static#i=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var F=a(3221),_=a(5295),N=a(9497),J=a(3797),q=a(2296),d=a(3305),g=a(4170),Y=a(617),E=a(2032),Q=a(2599);function P(e,c){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," El nombre es requerido "),t.qZA())}function D(e,c){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," La descripci\xf3n es requerida "),t.qZA())}function O(e,c){if(1&e&&(t.TgZ(0,"div",4)(1,"div",26)(2,"mat-form-field",27)(3,"mat-label"),t._uU(4,"Nombre"),t.qZA(),t._UZ(5,"input",28),t.YNc(6,P,2,0,"mat-error",29),t.qZA()(),t.TgZ(7,"div",26),t._UZ(8,"app-mat-select-complete",30),t.qZA()(),t.TgZ(9,"div",4)(10,"div",31)(11,"mat-form-field",27)(12,"mat-label"),t._uU(13,"Descripci\xf3n"),t.qZA(),t._UZ(14,"textarea",32),t.YNc(15,D,2,0,"mat-error",29),t.qZA()()()),2&e){const i=t.oxw();let n,o;t.xp6(6),t.Q6J("ngIf",null==(n=i.institucionForm.get("name"))?null:n.hasError("required")),t.xp6(2),t.Q6J("key","name")("keyValue","id")("value",i.valueInstitucion)("label","Tipo de instituci\xf3n")("control",i.institucionForm.controls.institutionTypeId)("options",i.listaTipoInstitucion),t.xp6(7),t.Q6J("ngIf",null==(o=i.institucionForm.get("description"))?null:o.hasError("required"))}}function k(e,c){if(1&e){const i=t.EpF();t.TgZ(0,"h2")(1,"mat-panel-title"),t._uU(2," Servicios "),t.qZA()(),t.TgZ(3,"span"),t._uU(4," Servicios asociados a la instituci\xf3n "),t.TgZ(5,"mat-icon"),t._uU(6,"build"),t.qZA()(),t.TgZ(7,"div",14)(8,"div",15),t._UZ(9,"app-ng-table",16),t.TgZ(10,"mat-action-row")(11,"button",17),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.guardarService())}),t._uU(12," Guardar "),t.qZA()()()()}if(2&e){const i=t.oxw();t.xp6(9),t.Q6J("config",i.configTableServicio)}}function w(e,c){1&e&&t._uU(0," paso 3 ")}function z(e,c){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=t.oxw(),o=i.$implicit;t.s9C("id",i.index+"n"),t.xp6(1),t.hij(" ",o.id," ")}}function B(e,c){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const i=t.oxw(),o=i.$implicit;t.s9C("id",i.index+"n"),t.xp6(1),t.hij(" ",o.descripcion," ")}}function L(e,c){if(1&e&&(t.TgZ(0,"tr"),t.YNc(1,z,2,2,"td",33),t.YNc(2,B,2,2,"td",34),t.TgZ(3,"td",20),t._UZ(4,"mat-slide-toggle"),t.qZA()()),2&e){const i=c.index,n=t.oxw();t.xp6(1),t.Q6J("ngIf",i+1>=n.indicePrimerItem&&i<n.indiceUltimoItem),t.xp6(1),t.Q6J("ngIf",i+1>=n.indicePrimerItem&&i<n.indiceUltimoItem)}}const M=[{path:"all-instituciones",component:U},{path:"add-institucion",component:(()=>{class e{setStep(i){this.step=i}nextStep(){this.step++}prevStep(){this.step--}constructor(i,n,o,r,v){this.fb=i,this.router=n,this.pasoParametrosService=o,this.http=r,this.institucionService=v,this.modoEditar=!1,this.listaSigAlarMadre=[],this.listaInstitucion=[],this.listaServicio=[],this.indicePrimerItem=1,this.indiceUltimoItem=10,this.checked=!1,this.step=0,this.isCreated=!1,this.configTableServicio={title:"Lista de servicios",keys:["id","name","description"],headerColumns:["No","Nombre","Descripci\xf3n"],urlData:l.N.apiUrl+"/services/consulta",typeColumns:["uuid",null,null],pageable:!0,showFilter:!1,hideDefaultActions:{add:!0,view:!0,edit:!0,delete:!0},checkbox:!0}}ngOnInit(){this.institucionForm=this.createContactForm(),this.getTipoInstitucion(this.institucionForm.value.institutionTypeId),this.llenarLista()}onSubmit(){(this.modoEditar?this.institucionService.update(this.institucionForm.value):this.institucionService.save(this.institucionForm.value)).subscribe(n=>{this.isCreated=!0}),console.log("Form Value",this.institucionForm.value)}guardarService(){}llenarLista(){this.listaSigAlarMadre=[{id:1,descripcion:"Hernan Huertas"}],this.listaInstitucion=[{id:1,nombre:"Institucion 1",tipo:"tipo 1",descripcion:"Soy la Institucion 1",date:"11/11/2011"},{id:2,nombre:"Institucion 2",tipo:"tipo 2",descripcion:"Soy la Institucion 2",date:"11/11/2011"},{id:3,nombre:"Institucion 3",tipo:"tipo 3",descripcion:"Soy la Institucion 3",date:"11/11/2011"}],this.listaServicio=[{id:1,nombre:"servicio 1",descripcion:"Soy el servicio 1"},{id:2,nombre:"servicio 2",descripcion:"Soy el servicio 2"},{id:3,nombre:"servicio 3",descripcion:"Soy el servicio 3"}]}cancel(){this.router.navigate(["/admin/instituciones/instituciones/all-instituciones"])}createContactForm(){return this.data=this.pasoParametrosService.obtenerParametro("data"),this.modoEditar=this.pasoParametrosService.obtenerParametro("modoEditar"),1==this.modoEditar?(this.titulo="Editar instituci\xf3n",this.subtitulo="En esta pantalla podr\xe1s editar la instituci\xf3n",this.isCreated=!0):(this.titulo="Adicionar instituci\xf3n",this.subtitulo="En esta pantalla podr\xe1s adicionar una instituci\xf3n"),this.fb.group({id:[this.data?.id],name:[this.data?.name,[s.kI.required]],description:[this.data?.description,[s.kI.required]],institutionTypeId:[this.data?.institutionTypeId,[s.kI.required]],createdAt:[this.data?.createdAt]})}checkedService(i){console.log(i)}listaTipoInstitucion(i){return this.http.get(l.N.apiUrl+"/typeInstitution/consulta",{params:{page:0,size:10,query:i}}).pipe((0,C.U)(o=>o?.content??[]))}getTipoInstitucion(i){i&&this.http.get(l.N.apiUrl+"/typeInstitution/"+i).subscribe(n=>{this.valueInstitucion=n})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(s.QS),t.Y36(u.F0),t.Y36(Z.T),t.Y36(h.eN),t.Y36(S))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-institucion"]],decls:66,vars:10,consts:[[1,"content"],[1,"content-block"],[1,"body"],[1,"m-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"header"],[3,"subtitle"],["stepperContent","","icon","apartment"],["stepperContent","","icon","design_services",3,"disabled"],["stepperContent","","icon","person",3,"disabled"],[1,"example-headers-align"],["hideToggle","",3,"expanded","opened"],[1,"tableBody"],[1,"body","table-responsive"],[3,"config"],["mat-button","","color","primary",3,"click"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-3"],[1,"table","table-bordered"],[1,"text-center"],[1,"text-left"],[4,"ngFor","ngForOf"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",1,"btn-space",3,"disabled"],["type","button","mat-raised-button","","color","warn",3,"click"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-3"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["appearance","outline",3,"key","keyValue","value","label","control","options"],[1,"col-xl-12","col-lg-6","col-md-12","col-sm-12","mb-3"],["matInput","","formControlName","description","required",""],["class","text-center",3,"id",4,"ngIf"],["class","text-left",3,"id",4,"ngIf"],[1,"text-center",3,"id"],[1,"text-left",3,"id"]],template:function(n,o){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"form",3),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h3")(9,"strong"),t._uU(10),t.qZA()()(),t.TgZ(11,"div",2)(12,"app-mat-stepper-main",8),t.YNc(13,O,16,8,"ng-template",9),t.YNc(14,k,13,1,"ng-template",10),t.YNc(15,w,1,0,"ng-template",11),t.qZA(),t.TgZ(16,"mat-accordion",12)(17,"mat-expansion-panel",13),t.NdJ("opened",function(){return o.setStep(0)}),t.TgZ(18,"mat-expansion-panel-header")(19,"mat-panel-title"),t._uU(20," Servicios "),t.qZA(),t.TgZ(21,"mat-panel-description"),t._uU(22," Servicios asociados a la instituci\xf3n "),t.TgZ(23,"mat-icon"),t._uU(24,"build"),t.qZA()()(),t.TgZ(25,"div",14)(26,"div",15),t._UZ(27,"app-ng-table",16),t.qZA()(),t.TgZ(28,"mat-action-row")(29,"button",17),t.NdJ("click",function(){return o.guardarService()}),t._uU(30," Siguiente "),t.qZA()()(),t.TgZ(31,"mat-expansion-panel",13),t.NdJ("opened",function(){return o.setStep(1)}),t.TgZ(32,"mat-expansion-panel-header")(33,"mat-panel-title"),t._uU(34," Personal "),t.qZA(),t.TgZ(35,"mat-panel-description"),t._uU(36," Personal asociado a la instituci\xf3n "),t.TgZ(37,"mat-icon"),t._uU(38,"perm_identity"),t.qZA()()(),t.TgZ(39,"div",4)(40,"div",18)(41,"div",7)(42,"h2")(43,"strong"),t._uU(44,"Lista del personal"),t.qZA()()(),t.TgZ(45,"div",15)(46,"table",19)(47,"thead")(48,"tr")(49,"th",20),t._uU(50,"No"),t.qZA(),t.TgZ(51,"th",21),t._uU(52,"Nombre"),t.qZA(),t.TgZ(53,"th",21),t._uU(54,"Acci\xf3n"),t.qZA()()(),t.TgZ(55,"tbody"),t.YNc(56,L,5,2,"tr",22),t.qZA()()()()(),t.TgZ(57,"mat-action-row")(58,"button",23),t.NdJ("click",function(){return o.prevStep()}),t._uU(59," Anterior "),t.qZA()()()()()()()(),t.TgZ(60,"div",4)(61,"div",18)(62,"button",24),t._uU(63," Guardar "),t.qZA(),t.TgZ(64,"button",25),t.NdJ("click",function(){return o.cancel()}),t._uU(65," Cancelar "),t.qZA()()()()()()()),2&n&&(t.xp6(3),t.Q6J("formGroup",o.institucionForm),t.xp6(7),t.hij(" ",o.titulo,""),t.xp6(2),t.Q6J("subtitle",o.subtitulo),t.xp6(2),t.Q6J("disabled",!o.isCreated),t.xp6(1),t.Q6J("disabled",!o.isCreated),t.xp6(2),t.Q6J("expanded",0===o.step),t.xp6(10),t.Q6J("config",o.configTableServicio),t.xp6(4),t.Q6J("expanded",1===o.step),t.xp6(25),t.Q6J("ngForOf",o.listaSigAlarMadre),t.xp6(6),t.Q6J("disabled",!o.institucionForm.valid))},dependencies:[p.sg,p.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,F.i,_.r,N.f,J.X,q.lW,d.pp,d.ib,d.VG,d.yz,d.yK,d.u4,g.KE,g.hX,g.TO,Y.Hw,E.Nt,Q.Rr]})}return e})()},{path:"**",component:b.J}];let V=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#i=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(M),u.Bz]})}return e})();var j=a(3140),G=a(6208);let R=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#i=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[p.ez,V,s.u5,s.UX,j.K,G.m]})}return e})()}}]);