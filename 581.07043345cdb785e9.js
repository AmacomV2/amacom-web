"use strict";(self.webpackChunkamacom=self.webpackChunkamacom||[]).push([[581],{1581:(q,g,s)=>{s.r(g),s.d(g,{InstitucionesModule:()=>B});var f=s(6814),a=s(6223),c=s(1896),y=s(9182),S=s(2589),d=s(9347),t=s(5879);let b=(()=>{class n{constructor(i,e){this.dialogRef=i,this.data=e}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(d.so),t.Y36(d.WI))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete",5,"i"]],decls:26,vars:4,consts:[[1,"clearfix"],[1,"font-weight-bold"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"ul",0)(2,"li")(3,"p")(4,"span",1)(5,"strong"),t._uU(6,"Nombre: "),t.qZA()(),t._uU(7),t.qZA()(),t.TgZ(8,"li")(9,"p")(10,"span",1)(11,"strong"),t._uU(12,"Tipo: "),t.qZA()(),t._uU(13),t.qZA()(),t.TgZ(14,"li")(15,"p")(16,"span",1)(17,"strong"),t._uU(18,"Descripci\xf3n: "),t.qZA()(),t._uU(19),t.qZA()(),t.TgZ(20,"li")(21,"p")(22,"span",1)(23,"strong"),t._uU(24,"Fecha: "),t.qZA()(),t._uU(25),t.qZA()()()()),2&e&&(t.xp6(7),t.hij("",o.data.row.name," "),t.xp6(6),t.hij("",o.data.row.institutionTypeId," "),t.xp6(6),t.hij("",o.data.row.description," "),t.xp6(6),t.hij("",o.data.row.createdAt," "))}})}return n})();var r=s(553),p=s(9862),I=s(2939),T=s(5798),C=s(4524);const A=function(){return{type:"img",resource:"assets/images/alarma.png"}};let Z=(()=>{class n extends S.n{constructor(i,e,o,h,v){super(),this.httpClient=i,this.dialog=e,this.snackBar=o,this.router=h,this.pasoParametrosService=v,this.title="INSTITUCIONES",this.subtitle="En esta pantalla podr\xe1s visualizar las instituciones existentes",this.config={title:"Lista de instituciones",keys:["id","name","description","institutionTypeName","updatedAt"],headerColumns:["No","Nombre","Descripci\xf3n","Tipo","\xfaltima actualizaci\xf3n"],urlData:r.N.apiUrl+"/institution/consulta",typeColumns:["uuid",null,null,null,"date"],pageable:!0,showFilter:!0},this.modalForm={edit:{urlView:"/admin/instituciones/instituciones/add-institucion",actionType:"edit"},create:{urlView:"/admin/instituciones/instituciones/add-institucion",actionType:"add"},delete:{modal:{title:"Eliminar institucion",component:b},actionType:"delete",urlEndpoint:"/alarmSign"},view:{modal:{title:"Ver institucion",width:"400px",maxHeight:"500px"},actionType:"view",configView:[{label:"Nombre",key:"name"},{label:"Descripci\xf3n",key:"description"},{label:"Tipo",key:"institutionTypeName"},{label:"Fecha de creaci\xf3n",key:"createdAt",type:"date"},{label:"Fecha de actualizaci\xf3n",key:"updatedAt",type:"date"}]}}}addNew(){this.router.navigate(["/admin/instituciones/instituciones/add-institucion"])}search(i){this.pasoParametrosService.adicionarParametro("data",i),this.router.navigate(["/admin/instituciones/instituciones/search-institucion"])}editCall(i){this.pasoParametrosService.adicionarParametro("data",i),this.pasoParametrosService.adicionarParametro("modoEditar",!0),this.router.navigate(["/admin/instituciones/instituciones/add-institucion"])}deleteItem(i){let e;e="true"===localStorage.getItem("isRtl")?"rtl":"ltr",this.dialog.open(b,{data:i,direction:e})}loadData(){}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(p.eN),t.Y36(d.uw),t.Y36(I.ux),t.Y36(c.F0),t.Y36(T.T))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-allinstituciones"]],features:[t.qOj],decls:1,vars:7,consts:[[3,"title","subtitle","showCreateButton","configTable","modalForm","dialogIcon"]],template:function(e,o){1&e&&t._UZ(0,"app-crud-container",0),2&e&&t.Q6J("title",o.title)("subtitle",o.subtitle)("showCreateButton",!0)("configTable",o.config)("modalForm",o.modalForm)("dialogIcon",t.DdM(6,A))},dependencies:[C._]})}return n})();var F=s(7398),l=s(9397);let x=(()=>{class n{constructor(i,e){this.http=i,this.snackbar=e}save(i){return this.http.post(r.N.apiUrl+"/institution/create",i).pipe((0,l.b)(e=>{this.snackbar.open("Se cre\xf3 correctamente la institucion","Cerrar")}))}update(i){return this.http.put(r.N.apiUrl+"/institution",i).pipe((0,l.b)(e=>{this.snackbar.open("Se actualiz\xf3 correctamente","Cerrar")}))}guardarServiceInstituto(i){return this.http.post(r.N.apiUrl+"/institutionService/create",i).pipe((0,l.b)(e=>{this.snackbar.open("Se cre\xf3 correctamente el servicio","Cerrar")}))}updateServicioInstituto(i){return this.http.put(r.N.apiUrl+"/institutionServicePerson",i).pipe((0,l.b)(e=>{this.snackbar.open("Se actualiz\xf3 correctamente el servicio","Cerrar")}))}static#t=this.\u0275fac=function(e){return new(e||n)(t.LFG(p.eN),t.LFG(I.ux))};static#i=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var N=s(3221),U=s(5295),P=s(9497),E=s(6877),J=s(2296),Y=s(3305),m=s(4170),D=s(2032);function w(n,u){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," El nombre es requerido "),t.qZA())}function k(n,u){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," La descripci\xf3n es requerida "),t.qZA())}function G(n,u){if(1&n){const i=t.EpF();t.TgZ(0,"form",11),t.NdJ("ngSubmit",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.onSubmit())}),t.TgZ(1,"div",3)(2,"div",12)(3,"mat-form-field",13)(4,"mat-label"),t._uU(5,"Nombre"),t.qZA(),t._UZ(6,"input",14),t.YNc(7,w,2,0,"mat-error",15),t.qZA()(),t.TgZ(8,"div",12),t._UZ(9,"app-mat-select-complete",16),t.qZA()(),t.TgZ(10,"div",3)(11,"div",17)(12,"mat-form-field",13)(13,"mat-label"),t._uU(14,"Descripci\xf3n"),t.qZA(),t._UZ(15,"textarea",18),t.YNc(16,k,2,0,"mat-error",15),t.qZA()()(),t.TgZ(17,"div",3)(18,"div",19)(19,"button",20),t._uU(20," Guardar "),t.qZA(),t.TgZ(21,"button",21),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.cancel())}),t._uU(22," Cancelar "),t.qZA()()()()}if(2&n){const i=t.oxw();let e,o;t.Q6J("formGroup",i.institucionForm),t.xp6(7),t.Q6J("ngIf",null==(e=i.institucionForm.get("name"))?null:e.hasError("required")),t.xp6(2),t.Q6J("key","name")("keyValue","id")("value",i.valueInstitucion)("label","Tipo de instituci\xf3n")("control",i.institucionForm.controls.institutionTypeId)("options",i.listaTipoInstitucion),t.xp6(7),t.Q6J("ngIf",null==(o=i.institucionForm.get("description"))?null:o.hasError("required"))}}function Q(n,u){if(1&n){const i=t.EpF();t.TgZ(0,"div",22)(1,"div",23),t._UZ(2,"app-ng-table",24),t.TgZ(3,"mat-action-row")(4,"button",25),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.guardarService())}),t._uU(5," Guardar "),t.qZA()()()()}if(2&n){const i=t.oxw();t.xp6(2),t.Q6J("config",i.configTableServicio)}}function z(n,u){if(1&n){const i=t.EpF();t._UZ(0,"app-ng-table",24),t.TgZ(1,"mat-action-row")(2,"button",25),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.guardarService())}),t._uU(3," Guardar "),t.qZA()()}if(2&n){const i=t.oxw();t.Q6J("config",i.configTablePersona)}}const M=[{path:"all-instituciones",component:Z},{path:"add-institucion",component:(()=>{class n{setStep(i){this.step=i}nextStep(){this.step++}prevStep(){this.step--}constructor(i,e,o,h,v){this.fb=i,this.router=e,this.pasoParametrosService=o,this.http=h,this.institucionService=v,this.modoEditar=!1,this.listaSigAlarMadre=[],this.listaInstitucion=[],this.listaServicio=[],this.indicePrimerItem=1,this.indiceUltimoItem=10,this.checked=!1,this.step=0,this.isCreated=!1,this.configTableServicio={title:"Lista de servicios",keys:["id","name"],headerColumns:["No","Nombre"],urlData:r.N.apiUrl+"/services/consulta",typeColumns:["uuid",null,null],pageable:!0,showFilter:!1,hideDefaultActions:{add:!0,view:!0,edit:!0,delete:!0},checkbox:!0},this.configTablePersona={title:"Lista de personas",keys:["id","name","description"],headerColumns:["No","Nombre","Descripci\xf3n"],urlData:r.N.apiUrl+"/institutionServicePerson/consulta",typeColumns:["uuid",null,null],pageable:!0,showFilter:!1,hideDefaultActions:{add:!0,view:!0,edit:!0,delete:!1}}}ngOnInit(){this.institucionForm=this.createContactForm(),this.getTipoInstitucion(this.institucionForm.value.institutionTypeId),this.llenarLista()}onSubmit(){(this.modoEditar?this.institucionService.update(this.institucionForm.value):this.institucionService.save(this.institucionForm.value)).subscribe(e=>{this.isCreated=!0,this.configTableServicio.pageableOptions.otherParams={institutionId:e.id},this.configTablePersona.pageableOptions.otherParams={institutionId:e.id}})}guardarService(){(this.modoEditar?this.institucionService.updateServicioInstituto(this.institucionForm.value):this.institucionService.guardarServiceInstituto(this.institucionForm.value)).subscribe(e=>{this.isCreated=!0,this.configTableServicio.pageableOptions.otherParams={institutionId:e.id},this.configTablePersona.pageableOptions.otherParams={institutionId:e.id}})}llenarLista(){this.listaSigAlarMadre=[{id:1,descripcion:"Hernan Huertas"}],this.listaInstitucion=[{id:1,nombre:"Institucion 1",tipo:"tipo 1",descripcion:"Soy la Institucion 1",date:"11/11/2011"},{id:2,nombre:"Institucion 2",tipo:"tipo 2",descripcion:"Soy la Institucion 2",date:"11/11/2011"},{id:3,nombre:"Institucion 3",tipo:"tipo 3",descripcion:"Soy la Institucion 3",date:"11/11/2011"}],this.listaServicio=[{id:1,nombre:"servicio 1",descripcion:"Soy el servicio 1"},{id:2,nombre:"servicio 2",descripcion:"Soy el servicio 2"},{id:3,nombre:"servicio 3",descripcion:"Soy el servicio 3"}]}cancel(){this.router.navigate(["/admin/instituciones/instituciones/all-instituciones"])}createContactForm(){return this.data=this.pasoParametrosService.obtenerParametro("data"),this.modoEditar=this.pasoParametrosService.obtenerParametro("modoEditar"),1==this.modoEditar?(this.titulo="Editar instituci\xf3n",this.subtitulo="En esta pantalla podr\xe1s editar la instituci\xf3n",this.isCreated=!0):(this.titulo="Adicionar instituci\xf3n",this.subtitulo="En esta pantalla podr\xe1s adicionar una instituci\xf3n"),this.fb.group({id:[this.data?.id],name:[this.data?.name,[a.kI.required]],description:[this.data?.description,[a.kI.required]],institutionTypeId:[this.data?.institutionTypeId,[a.kI.required]],createdAt:[this.data?.createdAt]})}checkedService(i){console.log(i)}listaTipoInstitucion(i){return this.http.get(r.N.apiUrl+"/typeInstitution/consulta",{params:{page:0,size:10,query:i}}).pipe((0,F.U)(o=>o?.content??[]))}getTipoInstitucion(i){i&&this.http.get(r.N.apiUrl+"/typeInstitution/"+i).subscribe(e=>{this.valueInstitucion=e})}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(a.QS),t.Y36(c.F0),t.Y36(T.T),t.Y36(p.eN),t.Y36(x))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-institucion"]],decls:15,vars:4,consts:[[1,"content"],[1,"content-block"],[1,"body"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"header"],[3,"subtitle"],["stepperContent","","icon","apartment","label","Informacion basica"],["stepperContent","","label","Servicios","icon","design_services",3,"disabled"],["stepperContent","","label","Personal","icon","person",3,"disabled"],[3,"formGroup","ngSubmit"],[1,"col-xl-6","col-lg-6","col-md-12","col-sm-12","mb-3"],["appearance","outline",1,"example-full-width","mb-3"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["appearance","outline",3,"key","keyValue","value","label","control","options"],[1,"col-xl-12","col-lg-6","col-md-12","col-sm-12","mb-3"],["matInput","","formControlName","description","required",""],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12","mb-3"],["mat-raised-button","","color","primary",1,"btn-space"],["type","button","mat-raised-button","","color","warn",3,"click"],[1,"tableBody"],[1,"body","table-responsive"],[3,"config"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3")(8,"strong"),t._uU(9),t.qZA()()(),t.TgZ(10,"div",2)(11,"app-mat-stepper-main",7),t.YNc(12,G,23,9,"ng-template",8),t.YNc(13,Q,6,1,"ng-template",9),t.YNc(14,z,4,1,"ng-template",10),t.qZA()()()()()()()()),2&e&&(t.xp6(9),t.hij(" ",o.titulo,""),t.xp6(2),t.Q6J("subtitle",o.subtitulo),t.xp6(2),t.Q6J("disabled",!o.isCreated),t.xp6(1),t.Q6J("disabled",!o.isCreated))},dependencies:[f.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,N.i,U.r,P.f,E.X,J.lW,Y.VG,m.KE,m.hX,m.TO,D.Nt]})}return n})()},{path:"**",component:y.J}];let O=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#i=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(M),c.Bz]})}return n})();var j=s(3140),L=s(6208);let B=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#i=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[f.ez,O,a.u5,a.UX,j.K,L.m]})}return n})()}}]);